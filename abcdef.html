<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Application</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: #333;
        }
        label {
            font-weight: bold;
            margin-top: 10px;
            display: block;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin: 5px 0 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #28a745;
            color: #fff;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        .error {
            color: red;
            margin-bottom: 20px;
        }
        .step {
            display: none;
        }
        .step.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>XYZ Bakers Pvt. Ltd - Loan Application</h1>

        <!-- Step 1: Login Form -->
        <div class="step active" id="step1">
            <h2>Login</h2>
            <form id="loginForm">
                <label for="userId">User ID:</label>
                <input type="text" id="userId" name="userId" required>

                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>

                <button type="submit">Login</button>
            </form>
        </div>

        <!-- Step 2: Company Profile -->
        <div class="step" id="step2">
            <h2>Company Profile</h2>
            <form id="profileForm">
                <label for="companyName">Name of the Firm/Company:</label>
                <input type="text" id="companyName" name="companyName" required>

                <label for="industry">Industry/Sector:</label>
                <input type="text" id="industry" name="industry" required>

                <label for="numPartners">Number of Partners/Directors/Members:</label>
                <input type="number" id="numPartners" name="numPartners" required>

                <label for="businessVintage">Vintage of Business (Years):</label>
                <input type="number" id="businessVintage" name="businessVintage" required>

                <label for="businessNature">Nature of Business:</label>
                <select id="businessNature" name="businessNature" required>
                    <option value="">Select</option>
                    <option value="MFG">Manufacturing</option>
                    <option value="Services">Services</option>
                    <option value="Agri">Agri-related</option>
                </select>

                <label for="numProducts">Number of Products/Services:</label>
                <input type="number" id="numProducts" name="numProducts" required>

                <label for="keyProducts">Key Products/Services:</label>
                <input type="text" id="keyProducts" name="keyProducts" required>

                <label for="isMSME">Whether MSME or not:</label>
                <select id="isMSME" name="isMSME" required>
                    <option value="">Select</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>

                <label for="udayamReg">Udyam Registration Number:</label>
                <input type="text" id="udayamReg" name="udayamReg">

                <label for="importExport">Whether Customer Do Import or Export:</label>
                <select id="importExport" name="importExport" required>
                    <option value="">Select</option>
                    <option value="Importer">Importer</option>
                    <option value="Exporter">Exporter</option>
                    <option value="None">None</option>
                </select>

                <button type="submit">Submit and Continue</button>
            </form>
        </div>

        <!-- Step 3: KYC Details -->
        <div class="step" id="step3">
            <h2>KYC Details</h2>
            <form id="kycForm">
                <label for="panCard">PAN Card (Firm/Owner):</label>
                <input type="text" id="panCard" name="panCard" required>

                <label for="gstn">GSTN:</label>
                <input type="text" id="gstn" name="gstn" required>

                <label for="udayamCert">Udyam Registration Certificate:</label>
                <input type="text" id="udayamCert" name="udayamCert" required>

                <label for="propertyTax">If Own Property - Last 3 Years Tax Receipt:</label>
                <input type="text" id="propertyTax" name="propertyTax">

                <label for="rentalAgreement">If Rented - Rental Agreement:</label>
                <input type="text" id="rentalAgreement" name="rentalAgreement">

                <button type="submit">Submit KYC</button>
            </form>
        </div>

        <!-- Step 4: Financial Data -->
        <div class="step" id="step4">
            <h2>Financial Data</h2>

            <!-- Direct Expenses -->
            <h3>Direct Expenses</h3>
            <div class="input-field">
                <label for="wages">Wages: </label>
                <input type="number" id="wages" value="8000">
            </div>
            <div class="input-field">
                <label for="stock">Stock on 1st April 2022: </label>
                <input type="number" id="stock" value="16000">
            </div>
            <div class="input-field">
                <label for="purchases">Purchases: </label>
                <input type="number" id="purchases" value="20000">
            </div>
            <div class="input-field">
                <label for="carriage">Carriage Inwards: </label>
                <input type="number" id="carriage" value="3100">
            </div>
            <button onclick="validateDirectExpenses()">Validate</button>
            <div id="direct-expenses-error" class="error"></div>

            <!-- Indirect Expenses -->
            <h3>Indirect Expenses</h3>
            <div class="input-field">
                <label for="salaries">Salaries: </label>
                <input type="number" id="salaries" value="8000">
            </div>
            <div class="input-field">
                <label for="repairs">Repairs: </label>
                <input type="number" id="repairs" value="1900">
            </div>
            <div class="input-field">
                <label for="rent">Rent: </label>
                <input type="number" id="rent" value="4500">
            </div>
            <div class="input-field">
                <label for="badDebts">Bad Debts: </label>
                <input type="number" id="badDebts" value="5000">
            </div>
            <button onclick="validateIndirectExpenses()">Validate</button>
            <div id="indirect-expenses-error" class="error"></div>

            <!-- Liabilities -->
            <h3>Liabilities</h3>
            <div class="input-field">
                <label for="creditors">Creditors: </label>
                <input type="number" id="creditors" value="26000">
            </div>
            <div class="input-field">
                <label for="capital">Capital: </label>
                <input type="number" id="capital" value="190000">
            </div>
            <div class="input-field">
                <label for="billsPayable">Bills Payable: </label>
                <input type="number" id="billsPayable" value="23500">
            </div>
            <button onclick="validateLiabilities()">Validate</button>
            <div id="liabilities-error" class="error"></div>

            <!-- Assets -->
            <h3>Assets</h3>
            <div class="input-field">
                <label for="debtors">Sundry Debtors: </label>
                <input type="number" id="debtors" value="36000">
            </div>
            <div class="input-field">
                <label for="cash">Cash at Bank: </label>
                <input type="number" id="cash" value="26000">
            </div>
            <div class="input-field">
                <label for="land">Land: </label>
                <input type="number" id="land" value="7000">
            </div>
            <button onclick="validateAssets()">Validate</button>
            <div id="assets-error" class="error"></div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        const steps = document.querySelectorAll('.step');
        
        function showStep(step) {
            steps.forEach((s, index) => {
                s.classList.toggle('active', index === step);
            });
        }

        // Step Navigation
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Login successful.');
            currentStep++;
            showStep(currentStep);
        });

        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            let formValid = true;
            const elements = this.elements;

            for (let i = 0; i < elements.length; i++) {
                if (elements[i].type !== 'submit' && elements[i].value === '') {
                    formValid = false;
                    elements[i].style.borderColor = 'red';
                } else {
                    elements[i].style.borderColor = '#ccc';
                }
            }

            if (formValid) {
                alert('Profile details submitted.');
                currentStep++;
                showStep(currentStep);
            } else {
                alert('Please fill out all fields correctly.');
            }
        });

        document.getElementById('kycForm').addEventListener('submit', function(e) {
            e.preventDefault();
            let formValid = true;
            const elements = this.elements;

            for (let i = 0; i < elements.length; i++) {
                if (elements[i].type !== 'submit' && elements[i].value === '') {
                    formValid = false;
                    elements[i].style.borderColor = 'red';
                } else {
                    elements[i].style.borderColor = '#ccc';
                }
            }

            if (formValid) {
                alert('KYC details submitted.');
                currentStep++;
                showStep(currentStep);
            } else {
                alert('Please complete the KYC details correctly.');
            }
        });

        function validateDirectExpenses() {
            const wages = parseFloat(document.getElementById('wages').value);
            const stock = parseFloat(document.getElementById('stock').value);
            const purchases = parseFloat(document.getElementById('purchases').value);
            const carriage = parseFloat(document.getElementById('carriage').value);

            const totalDirectExpenses = wages + stock + purchases + carriage;
            const correctTotal = 100000;
            const attemptCount = validateInput(totalDirectExpenses, correctTotal, 'direct-expenses-error');
            if (attemptCount === 3) {
                alert('Correct value for Direct Expenses: ' + correctTotal);
            }
        }

        function validateIndirectExpenses() {
            const salaries = parseFloat(document.getElementById('salaries').value);
            const repairs = parseFloat(document.getElementById('repairs').value);
            const rent = parseFloat(document.getElementById('rent').value);
            const badDebts = parseFloat(document.getElementById('badDebts').value);

            const totalIndirectExpenses = salaries + repairs + rent + badDebts;
            const correctTotal = 19400;
            const attemptCount = validateInput(totalIndirectExpenses, correctTotal, 'indirect-expenses-error');
            if (attemptCount === 3) {
                alert('Correct value for Indirect Expenses: ' + correctTotal);
            }
        }

        function validateLiabilities() {
            const creditors = parseFloat(document.getElementById('creditors').value);
            const capital = parseFloat(document.getElementById('capital').value);
            const billsPayable = parseFloat(document.getElementById('billsPayable').value);

            const totalLiabilities = creditors + capital + billsPayable;
            const correctTotal = 239500;
            const attemptCount = validateInput(totalLiabilities, correctTotal, 'liabilities-error');
            if (attemptCount === 3) {
                alert('Correct value for Liabilities: ' + correctTotal);
            }
        }

        function validateAssets() {
            const debtors = parseFloat(document.getElementById('debtors').value);
            const cash = parseFloat(document.getElementById('cash').value);
            const land = parseFloat(document.getElementById('land').value);

            const totalAssets = debtors + cash + land;
            const correctTotal = 69000;
            const attemptCount = validateInput(totalAssets, correctTotal, 'assets-error');
            if (attemptCount === 3) {
                alert('Correct value for Assets: ' + correctTotal);
            }
        }

        let attempts = {
            'direct-expenses': 0,
            'indirect-expenses': 0,
            'liabilities': 0,
            'assets': 0
        };

        function validateInput(inputTotal, correctTotal, errorElementId) {
            if (inputTotal !== correctTotal) {
                attempts[errorElementId]++;
                document.getElementById(errorElementId).innerText = "Please check once and enter the right entry with the exact value.";
                document.getElementById(errorElementId).style.color = 'red';
                return attempts[errorElementId];
            } else {
                document.getElementById(errorElementId).innerText = "";
                return 0;
            }
        }
    </script>
</body>
</html>
